<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unit 2: Cellular Injury & Adaptation - Pharmacy Exam</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #2E7D32;
            --primary-light: #4CAF50;
            --primary-dark: #1B5E20;
            --secondary: #FF6D00;
            --secondary-light: #FF9800;
            --accent: #1565C0;
            --light: #F5F5F5;
            --dark: #212121;
            --gray: #757575;
            --success: #388E3C;
            --warning: #F57C00;
            --danger: #D32F2F;
            --surface: #FFFFFF;
            --background: #E8F5E9;
        }

        body {
            background: linear-gradient(135deg, var(--background) 0%, #FFFFFF 100%);
            color: var(--dark);
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            padding: 30px 20px;
            background: var(--surface);
            border-radius: 16px;
            margin-bottom: 30px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            border-left: 6px solid var(--primary);
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: var(--primary-dark);
        }

        .subtitle {
            font-size: 1.2rem;
            color: var(--gray);
            margin-bottom: 15px;
        }

        .university-info {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .info-item {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--primary);
            font-weight: 500;
        }

        .info-icon {
            font-size: 1.2rem;
        }

        .stats-bar {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-bottom: 25px;
        }

        .stat-card {
            background: var(--surface);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--gray);
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 25px;
        }

        .quiz-area {
            background: var(--surface);
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--background);
        }

        .question-number {
            font-size: 1.3rem;
            color: var(--primary);
            font-weight: 600;
        }

        .question-text {
            font-size: 1.3rem;
            margin-bottom: 25px;
            line-height: 1.5;
            color: var(--dark);
        }

        .options-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 30px;
        }

        .option {
            background: var(--light);
            border: 2px solid #E0E0E0;
            border-radius: 10px;
            padding: 18px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: flex-start;
        }

        .option:hover {
            background: #E8F5E9;
            border-color: var(--primary-light);
        }

        .option.selected {
            background: #E8F5E9;
            border-color: var(--primary);
        }

        .option.correct {
            background: #E8F5E9;
            border-color: var(--success);
        }

        .option.incorrect {
            background: #FFEBEE;
            border-color: var(--danger);
        }

        .option-letter {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 36px;
            height: 36px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            margin-right: 15px;
            font-weight: bold;
            flex-shrink: 0;
        }

        .option.selected .option-letter {
            background: var(--primary-dark);
        }

        .option.correct .option-letter {
            background: var(--success);
        }

        .option.incorrect .option-letter {
            background: var(--danger);
        }

        .feedback-area {
            background: #F1F8E9;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            display: none;
            border-left: 4px solid var(--primary);
        }

        .feedback-area.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .feedback-title {
            font-size: 1.2rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            color: var(--primary-dark);
            font-weight: 600;
        }

        .explanation {
            margin-bottom: 15px;
            line-height: 1.6;
        }

        .pharmacy-tip {
            background: #FFF3E0;
            border-left: 4px solid var(--warning);
            padding: 15px;
            border-radius: 0 8px 8px 0;
            font-style: italic;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(46, 125, 50, 0.3);
        }

        .btn-secondary {
            background: #E0E0E0;
            color: var(--dark);
        }

        .btn-secondary:hover {
            background: #BDBDBD;
            transform: translateY(-2px);
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-success:hover {
            background: #2E7D32;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(56, 142, 60, 0.3);
        }

        .sidebar {
            background: var(--surface);
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            height: fit-content;
        }

        .sidebar-title {
            font-size: 1.3rem;
            margin-bottom: 20px;
            color: var(--primary);
            text-align: center;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--background);
        }

        .question-palette {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin-bottom: 25px;
        }

        .palette-item {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            background: #F5F5F5;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            border: 2px solid transparent;
        }

        .palette-item:hover {
            background: #E0E0E0;
            transform: scale(1.1);
        }

        .palette-item.answered {
            background: var(--primary-light);
            color: white;
        }

        .palette-item.current {
            border: 2px solid var(--primary-dark);
            transform: scale(1.1);
        }

        .palette-item.correct {
            background: var(--success);
            color: white;
        }

        .palette-item.incorrect {
            background: var(--danger);
            color: white;
        }

        .timer-container {
            text-align: center;
            margin-bottom: 25px;
            padding: 15px;
            background: #E3F2FD;
            border-radius: 10px;
        }

        .timer {
            font-size: 2rem;
            font-weight: bold;
            color: var(--accent);
            margin: 10px 0;
        }

        .timer-warning {
            color: var(--danger);
        }

        .progress-container {
            margin-bottom: 25px;
        }

        .progress-bar {
            height: 10px;
            background: #E0E0E0;
            border-radius: 5px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--primary-light));
            width: 0%;
            transition: width 0.5s ease;
        }

        .progress-text {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: var(--gray);
        }

        .quick-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .stat-card-small {
            background: #F5F5F5;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }

        .stat-card-value {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-card-label {
            font-size: 0.8rem;
            color: var(--gray);
        }

        .results-container {
            background: var(--surface);
            border-radius: 16px;
            padding: 40px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            text-align: center;
            display: none;
        }

        .results-container.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .results-title {
            font-size: 2.2rem;
            margin-bottom: 20px;
            color: var(--primary);
        }

        .score-display {
            font-size: 4rem;
            font-weight: bold;
            margin: 20px 0;
            color: var(--primary);
        }

        .performance-message {
            font-size: 1.3rem;
            margin-bottom: 30px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            line-height: 1.5;
        }

        .results-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin: 30px 0;
        }

        .result-stat {
            background: #F5F5F5;
            border-radius: 12px;
            padding: 20px;
        }

        .result-stat-value {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .result-stat-label {
            font-size: 0.9rem;
            color: var(--gray);
        }

        .review-section {
            text-align: left;
            margin-top: 40px;
        }

        .review-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: var(--primary);
            text-align: center;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--background);
        }

        .review-item {
            background: #FAFAFA;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            border-left: 4px solid var(--primary-light);
        }

        .review-question {
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--dark);
        }

        .review-answer {
            margin: 5px 0;
        }

        .review-correct {
            color: var(--success);
        }

        .review-incorrect {
            color: var(--danger);
        }

        .review-explanation {
            margin-top: 10px;
            font-size: 0.9rem;
            color: var(--gray);
        }

        .pharmacy-context {
            background: #E3F2FD;
            padding: 10px 15px;
            border-radius: 8px;
            margin-top: 10px;
            border-left: 4px solid var(--accent);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @media (max-width: 992px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .results-stats {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 576px) {
            h1 {
                font-size: 2rem;
            }
            
            .stats-bar {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .question-palette {
                grid-template-columns: repeat(4, 1fr);
            }
            
            .results-stats {
                grid-template-columns: 1fr;
            }
            
            .university-info {
                flex-direction: column;
                align-items: center;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Unit 2: Cellular Injury & Adaptation</h1>
            <p class="subtitle">Pharmacy Department - Haramaya University</p>
            <div class="university-info">
                <div class="info-item">
                    <span class="info-icon">üìö</span>
                    <span>2nd Year Pharmacy</span>
                </div>
                <div class="info-item">
                    <span class="info-icon">‚è±Ô∏è</span>
                    <span>60 Questions</span>
                </div>
                <div class="info-item">
                    <span class="info-icon">üéØ</span>
                    <span>Exam Preparation</span>
                </div>
            </div>
        </header>

        <div class="stats-bar">
            <div class="stat-card">
                <div class="stat-value" id="score-value">0</div>
                <div class="stat-label">Score</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="progress-value">0%</div>
                <div class="stat-label">Progress</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="correct-value">0</div>
                <div class="stat-label">Correct</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="incorrect-value">0</div>
                <div class="stat-label">Incorrect</div>
            </div>
        </div>

        <div class="main-content">
            <div class="quiz-area">
                <div class="question-header">
                    <div class="question-number" id="question-number">Question 1 of 60</div>
                </div>
                
                <div class="question-text" id="question-text"></div>
                
                <div class="options-container" id="options-container"></div>
                
                <div class="feedback-area" id="feedback-area">
                    <div class="feedback-title" id="feedback-title"></div>
                    <div class="explanation" id="explanation"></div>
                    <div class="pharmacy-tip" id="pharmacy-tip"></div>
                </div>
                
                <div class="navigation">
                    <button class="btn btn-secondary" id="prev-btn">
                        <span>‚Üê</span> Previous
                    </button>
                    <button class="btn btn-primary" id="next-btn">
                        Next <span>‚Üí</span>
                    </button>
                    <button class="btn btn-success" id="submit-btn" style="display: none;">
                        Submit Exam
                    </button>
                </div>
            </div>
            
            <div class="sidebar">
                <h3 class="sidebar-title">Question Navigator</h3>
                <div class="question-palette" id="question-palette"></div>
                
                <div class="timer-container">
                    <div>Time Remaining</div>
                    <div class="timer" id="timer">45:00</div>
                </div>
                
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress" id="progress-bar"></div>
                    </div>
                    <div class="progress-text">
                        <span>Progress</span>
                        <span id="progress-percent">0%</span>
                    </div>
                </div>
                
                <div class="quick-stats">
                    <div class="stat-card-small">
                        <div class="stat-card-value" id="answered-value">0</div>
                        <div class="stat-card-label">Answered</div>
                    </div>
                    <div class="stat-card-small">
                        <div class="stat-card-value" id="remaining-value">60</div>
                        <div class="stat-card-label">Remaining</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="results-container" id="results-container">
            <h2 class="results-title">Exam Completed!</h2>
            <div class="score-display" id="final-score">0/60</div>
            <div class="performance-message" id="performance-message"></div>
            
            <div class="results-stats">
                <div class="result-stat">
                    <div class="result-stat-value" id="final-correct">0</div>
                    <div class="result-stat-label">Correct Answers</div>
                </div>
                <div class="result-stat">
                    <div class="result-stat-value" id="final-incorrect">0</div>
                    <div class="result-stat-label">Incorrect Answers</div>
                </div>
                <div class="result-stat">
                    <div class="result-stat-value" id="final-skipped">0</div>
                    <div class="result-stat-label">Skipped Questions</div>
                </div>
                <div class="result-stat">
                    <div class="result-stat-value" id="final-time">0:00</div>
                    <div class="result-stat-label">Time Taken</div>
                </div>
            </div>
            
            <button class="btn btn-primary" id="retake-btn">Retake Exam</button>
            
            <div class="review-section">
                <h3 class="review-title">Question Review</h3>
                <div id="question-review"></div>
            </div>
        </div>
    </div>

    <script>
        // Comprehensive Unit 2 questions for Pharmacy students
        const questions = [
            {
                question: "A 45-year-old patient with chronic hypertension presents with left ventricular enlargement. Which cellular adaptation is primarily responsible for this finding?",
                options: [
                    "Hyperplasia",
                    "Hypertrophy", 
                    "Metaplasia",
                    "Atrophy"
                ],
                correct: 1,
                explanation: "The left ventricular enlargement in chronic hypertension is due to hypertrophy - an increase in cell size without an increase in cell number. Cardiac muscle cells cannot divide, so they adapt to increased workload by enlarging.",
                pharmacyTip: "Understanding cardiac adaptations helps in managing antihypertensive therapy and monitoring for complications like heart failure."
            },
            {
                question: "A pharmacy student is reviewing a case of Barrett esophagus. Which cellular adaptation best describes the change from squamous to columnar epithelium in the esophagus?",
                options: [
                    "Dysplasia",
                    "Hyperplasia",
                    "Metaplasia",
                    "Hypertrophy"
                ],
                correct: 2,
                explanation: "Barrett esophagus involves metaplasia - the reversible replacement of one differentiated cell type by another. In this case, squamous epithelium changes to intestinal-type columnar epithelium due to chronic acid exposure.",
                pharmacyTip: "Patients with Barrett esophagus require regular monitoring as this metaplastic change increases risk of adenocarcinoma."
            },
            {
                question: "A 60-year-old patient with long-standing COPD develops right ventricular hypertrophy. What is the most likely mechanism for this adaptation?",
                options: [
                    "Increased metabolic demand",
                    "Chronic inflammation",
                    "Persistent hypoxemia",
                    "Recurrent infections"
                ],
                correct: 2,
                explanation: "In COPD, chronic hypoxemia leads to pulmonary vasoconstriction and pulmonary hypertension, causing increased afterload on the right ventricle and subsequent hypertrophy.",
                pharmacyTip: "Monitoring for cor pulmonale (right heart failure due to lung disease) is crucial in COPD management."
            },
            {
                question: "Which of the following pathological findings would be most characteristic of irreversible cell injury?",
                options: [
                    "Cellular swelling and fatty change",
                    "Membrane blebbing and chromatin clumping", 
                    "Severe mitochondrial swelling with amorphous densities",
                    "Ribosomal detachment from RER"
                ],
                correct: 2,
                explanation: "Severe mitochondrial swelling with amorphous densities represents irreversible damage to mitochondria, indicating the point of no return in cell injury where recovery is impossible.",
                pharmacyTip: "Recognizing irreversible injury helps in understanding why some tissue damage is permanent despite treatment."
            },
            {
                question: "A patient presents with painless jaundice, and laboratory tests show elevated conjugated bilirubin. Which mechanism of cellular injury is most likely involved?",
                options: [
                    "Hemolysis",
                    "Hepatocellular damage",
                    "Biliary obstruction", 
                    "Genetic enzyme deficiency"
                ],
                correct: 2,
                explanation: "Painless jaundice with elevated conjugated bilirubin suggests biliary obstruction, which causes injury through accumulation of toxic bile acids within hepatocytes.",
                pharmacyTip: "Drug-induced cholestasis is an important differential diagnosis that pharmacists should recognize."
            },
            {
                question: "Which type of necrosis is characterized by preservation of tissue architecture and is typically seen in myocardial infarction?",
                options: [
                    "Caseous necrosis",
                    "Coagulative necrosis",
                    "Liquefactive necrosis", 
                    "Fat necrosis"
                ],
                correct: 1,
                explanation: "Coagulative necrosis preserves tissue architecture due to denaturation of structural proteins and enzymes. It's characteristic of ischemic injury in solid organs like heart, kidney, and spleen.",
                pharmacyTip: "Understanding necrosis patterns helps in diagnosing the cause and extent of tissue damage."
            },
            {
                question: "A 35-year-old woman with gallstones develops severe epigastric pain radiating to the back. Which type of necrosis would most likely be found in the pancreas?",
                options: [
                    "Coagulative necrosis",
                    "Fat necrosis", 
                    "Caseous necrosis",
                    "Fibrinoid necrosis"
                ],
                correct: 1,
                explanation: "Acute pancreatitis involves fat necrosis due to release of pancreatic lipases that digest peripancreatic fat, leading to saponification (soap formation) with calcium.",
                pharmacyTip: "Recognizing pancreatitis complications is vital as some medications can trigger or exacerbate this condition."
            },
            {
                question: "Which biochemical event is considered the 'point of no return' in irreversible cell injury?",
                options: [
                    "ATP depletion",
                    "Loss of calcium homeostasis", 
                    "Membrane phospholipid degradation",
                    "Lysosomal enzyme release"
                ],
                correct: 2,
                explanation: "Severe membrane damage with phospholipid degradation represents irreversible injury because it leads to complete loss of cellular integrity and function.",
                pharmacyTip: "This understanding helps explain why some toxic exposures cause irreversible organ damage despite treatment."
            },
            {
                question: "A patient with tuberculosis develops granulomas with central necrotic material. What type of necrosis is characteristic of tuberculosis?",
                options: [
                    "Coagulative necrosis",
                    "Liquefactive necrosis", 
                    "Caseous necrosis",
                    "Gangrenous necrosis"
                ],
                correct: 2,
                explanation: "Caseous necrosis, with its characteristic cheese-like appearance, is typical of tuberculosis and results from a combination of coagulative and liquefactive processes within granulomas.",
                pharmacyTip: "Understanding TB pathology is crucial for appropriate anti-tubercular therapy management."
            },
            {
                question: "Which of the following best describes the mechanism of apoptosis?",
                options: [
                    "Accidental cell death with inflammation",
                    "Programmed cell death without inflammation", 
                    "Ischemic cell death with coagulation",
                    "Enzymatic cell digestion with pus formation"
                ],
                correct: 1,
                explanation: "Apoptosis is a genetically programmed, energy-dependent process of cell death that occurs without inflammation, characterized by cell shrinkage, chromatin condensation, and formation of apoptotic bodies.",
                pharmacyTip: "Many chemotherapeutic drugs work by inducing apoptosis in cancer cells."
            },
            {
                question: "A pharmacy student is studying free radical injury. Which enzyme is primarily responsible for converting superoxide to hydrogen peroxide?",
                options: [
                    "Catalase",
                    "Glutathione peroxidase", 
                    "Superoxide dismutase",
                    "Myeloperoxidase"
                ],
                correct: 2,
                explanation: "Superoxide dismutase (SOD) converts superoxide radicals (O‚ÇÇ‚Åª) to hydrogen peroxide (H‚ÇÇO‚ÇÇ), which is then broken down by catalase or glutathione peroxidase.",
                pharmacyTip: "Antioxidant therapy often targets these enzyme systems to reduce oxidative stress in various diseases."
            },
            {
                question: "Which intracellular accumulation is characteristic of Wilson's disease?",
                options: [
                    "Iron in hepatocytes",
                    "Copper in hepatocytes", 
                    "Fat in hepatocytes", 
                    "Glycogen in hepatocytes"
                ],
                correct: 1,
                explanation: "Wilson's disease involves accumulation of copper in hepatocytes due to impaired biliary excretion, leading to liver damage and neurological symptoms.",
                pharmacyTip: "Chelating agents like penicillamine are used to treat copper overload in Wilson's disease."
            },
            {
                question: "A patient with chronic renal failure develops metastatic calcification. What is the underlying mechanism?",
                options: [
                    "Local tissue damage with normal serum calcium",
                    "Hypercalcemia with deposition in normal tissues", 
                    "Infection with mineral deposition",
                    "Trauma with dystrophic calcification"
                ],
                correct: 1,
                explanation: "Metastatic calcification occurs in normal tissues due to hypercalcemia, commonly seen in chronic renal failure due to secondary hyperparathyroidism.",
                pharmacyTip: "Phosphate binders and vitamin D analogs are used to manage mineral metabolism in renal failure."
            },
            {
                question: "Which cellular change is reversible and represents an early response to injury?",
                options: [
                    "Nuclear pyknosis",
                    "Cellular swelling", 
                    "Membrane rupture",
                    "Mitochondrial calcification"
                ],
                correct: 1,
                explanation: "Cellular swelling (hydropic change) due to failure of Na‚Å∫-K‚Å∫ ATPase is an early, reversible manifestation of cell injury.",
                pharmacyTip: "Recognizing reversible changes helps in early intervention to prevent permanent damage."
            },
            {
                question: "A patient presents with a painless neck mass. Fine needle aspiration shows cells with 'orphan Annie' nuclei. What is the most likely diagnosis?",
                options: [
                    "Papillary thyroid carcinoma", 
                    "Follicular thyroid carcinoma",
                    "Medullary thyroid carcinoma", 
                    "Anaplastic thyroid carcinoma"
                ],
                correct: 0,
                explanation: "Papillary thyroid carcinoma characteristically shows cells with empty-appearing nuclei ('orphan Annie' nuclei) due to chromatin clearing.",
                pharmacyTip: "Understanding cytological features helps in appropriate referral and management of thyroid nodules."
            },
            {
                question: "Which of the following represents pathological hyperplasia?",
                options: [
                    "Uterine enlargement during pregnancy",
                    "Liver regeneration after partial hepatectomy", 
                    "Endometrial hyperplasia in anovulatory cycles", 
                    "Muscle hypertrophy in athletes"
                ],
                correct: 2,
                explanation: "Endometrial hyperplasia due to unopposed estrogen stimulation represents pathological hyperplasia, which can progress to dysplasia and cancer.",
                pharmacyTip: "Hormonal therapies must be carefully managed to avoid pathological hyperplastic responses."
            },
            {
                question: "A patient with chronic gastritis due to H. pylori infection develops intestinal metaplasia. What is the significance of this finding?",
                options: [
                    "It is a benign reversible change",
                    "It increases risk of gastric adenocarcinoma", 
                    "It indicates complete healing",
                    "It is a precursor to lymphoma"
                ],
                correct: 1,
                explanation: "Intestinal metaplasia in the stomach is a premalignant condition that significantly increases the risk of gastric adenocarcinoma.",
                pharmacyTip: "Eradication of H. pylori may prevent progression of metaplasia to cancer."
            },
            {
                question: "Which type of gangrene is characterized by bacterial infection and liquefactive necrosis?",
                options: [
                    "Dry gangrene",
                    "Wet gangrene", 
                    "Gas gangrene",
                    "Fournier's gangrene"
                ],
                correct: 1,
                explanation: "Wet gangrene involves liquefactive necrosis due to superimposed bacterial infection, typically occurring in moist tissues like bowel and limbs with venous obstruction.",
                pharmacyTip: "Wet gangrene requires urgent antibiotic therapy and surgical intervention."
            },
            {
                question: "A patient with atherosclerosis develops calcification in arterial plaques. What type of calcification is this?",
                options: [
                    "Metastatic calcification",
                    "Dystrophic calcification", 
                    "Physiological calcification",
                    "Idiopathic calcification"
                ],
                correct: 1,
                explanation: "Dystrophic calcification occurs in damaged or necrotic tissues with normal serum calcium levels, commonly seen in atherosclerotic plaques.",
                pharmacyTip: "Statins may help stabilize plaques and reduce cardiovascular events beyond just lipid lowering."
            },
            {
                question: "Which organ is most susceptible to hypoxic injury?",
                options: [
                    "Liver",
                    "Kidney", 
                    "Brain", 
                    "Skeletal muscle"
                ],
                correct: 2,
                explanation: "The brain is most sensitive to hypoxia because neurons have high metabolic demands, poor anaerobic capacity, and cannot regenerate.",
                pharmacyTip: "Neuroprotective strategies focus on minimizing hypoxic damage during strokes and other brain injuries."
            },
            {
                question: "A pharmacy student is reviewing a case of carbon tetrachloride poisoning. What is the primary mechanism of liver injury?",
                options: [
                    "Direct membrane damage",
                    "Free radical formation", 
                    "Protein denaturation",
                    "DNA damage"
                ],
                correct: 1,
                explanation: "Carbon tetrachloride is metabolized by cytochrome P450 to trichloromethyl free radical, which causes lipid peroxidation and membrane damage in hepatocytes.",
                pharmacyTip: "Understanding toxic mechanisms helps in developing antidotes and protective strategies."
            },
            {
                question: "Which of the following is a characteristic feature of apoptosis but not necrosis?",
                options: [
                    "Inflammation",
                    "Cell swelling", 
                    "Formation of apoptotic bodies", 
                    "Loss of membrane integrity"
                ],
                correct: 2,
                explanation: "Formation of membrane-bound apoptotic bodies that are phagocytosed by neighboring cells is characteristic of apoptosis and does not occur in necrosis.",
                pharmacyTip: "Many cancer therapies aim to induce apoptosis in malignant cells while sparing normal tissues."
            },
            {
                question: "A patient with chronic alcohol abuse develops fatty liver. What is the primary mechanism?",
                options: [
                    "Increased fatty acid oxidation",
                    "Impaired lipoprotein synthesis", 
                    "Enhanced triglyceride secretion",
                    "Decreased fatty acid synthesis"
                ],
                correct: 1,
                explanation: "Alcohol metabolism generates NADH, which inhibits fatty acid oxidation and promotes triglyceride synthesis, while also impairing lipoprotein assembly and secretion.",
                pharmacyTip: "Nutritional support and alcohol cessation are key in managing alcoholic fatty liver disease."
            },
            {
                question: "Which cellular adaptation is reversible and involves replacement of one cell type by another?",
                options: [
                    "Hypertrophy",
                    "Hyperplasia", 
                    "Metaplasia", 
                    "Dysplasia"
                ],
                correct: 2,
                explanation: "Metaplasia is the reversible replacement of one differentiated cell type by another, usually in response to chronic irritation or stress.",
                pharmacyTip: "Removing the inciting stimulus can reverse metaplasia and prevent progression to dysplasia."
            },
            {
                question: "A patient with rheumatoid arthritis develops subcutaneous nodules. What type of necrosis is typically found in these nodules?",
                options: [
                    "Coagulative necrosis",
                    "Caseous necrosis", 
                    "Fibrinoid necrosis", 
                    "Liquefactive necrosis"
                ],
                correct: 2,
                explanation: "Rheumatoid nodules show fibrinoid necrosis, characterized by deposition of fibrin-like material in connective tissue.",
                pharmacyTip: "DMARDs (Disease-Modifying Antirheumatic Drugs) help control the underlying autoimmune process."
            },
            {
                question: "Which of the following best describes the role of Bcl-2 in apoptosis?",
                options: [
                    "It promotes cell death",
                    "It inhibits apoptosis", 
                    "It activates caspases",
                    "It damages mitochondrial membranes"
                ],
                correct: 1,
                explanation: "Bcl-2 is an anti-apoptotic protein that prevents cytochrome c release from mitochondria, thereby inhibiting the intrinsic apoptosis pathway.",
                pharmacyTip: "Some cancers overexpress Bcl-2, making them resistant to apoptosis-inducing chemotherapy."
            },
            {
                question: "A patient with hyperparathyroidism develops nephrocalcinosis. What type of calcification is this?",
                options: [
                    "Dystrophic calcification",
                    "Metastatic calcification", 
                    "Physiological calcification",
                    "Heterotopic calcification"
                ],
                correct: 1,
                explanation: "Nephrocalcinosis in hyperparathyroidism represents metastatic calcification - deposition of calcium salts in normal tissues due to hypercalcemia.",
                pharmacyTip: "Managing hypercalcemia is crucial to prevent renal and other tissue damage."
            },
            {
                question: "Which intracellular pigment accumulation is associated with aging?",
                options: [
                    "Hemosiderin",
                    "Melanin", 
                    "Lipofuscin", 
                    "Bilirubin"
                ],
                correct: 2,
                explanation: "Lipofuscin, the 'wear and tear' pigment, accumulates with age in post-mitotic cells like neurons and cardiac myocytes.",
                pharmacyTip: "Antioxidants may help reduce oxidative stress that contributes to lipofuscin accumulation."
            },
            {
                question: "A patient presents with blackening of toes without infection. What type of gangrene is this?",
                options: [
                    "Dry gangrene", 
                    "Wet gangrene",
                    "Gas gangrene",
                    "Hospital gangrene"
                ],
                correct: 0,
                explanation: "Dry gangrene occurs without infection, typically in extremities with arterial insufficiency, characterized by coagulative necrosis and mummification.",
                pharmacyTip: "Vascular assessment and risk factor modification are essential in managing dry gangrene."
            },
            {
                question: "Which enzyme is released into serum following myocardial infarction and serves as a diagnostic marker?",
                options: [
                    "Amylase",
                    "Alkaline phosphatase", 
                    "Troponin", 
                    "Gamma-glutamyl transferase"
                ],
                correct: 2,
                explanation: "Cardiac troponins are specific markers of myocardial injury released when cardiac myocytes undergo necrosis.",
                pharmacyTip: "Troponin levels help diagnose myocardial infarction and guide antiplatelet and anticoagulant therapy."
            },
            {
                question: "A patient with chronic bronchitis develops squamous metaplasia in bronchial epithelium. What is the primary stimulus for this change?",
                options: [
                    "Viral infection",
                    "Cigarette smoke", 
                    "Air pollution",
                    "Genetic predisposition"
                ],
                correct: 1,
                explanation: "Cigarette smoke is the most common cause of squamous metaplasia in respiratory epithelium, representing an adaptive response to chronic irritation.",
                pharmacyTip: "Smoking cessation can reverse early metaplastic changes and reduce cancer risk."
            },
            {
                question: "Which type of cell death is characterized by inflammation and results from ischemia?",
                options: [
                    "Apoptosis",
                    "Necrosis", 
                    "Autophagy",
                    "Senescence"
                ],
                correct: 1,
                explanation: "Necrosis is unprogrammed cell death that always elicits inflammation and is commonly caused by ischemia, toxins, or trauma.",
                pharmacyTip: "Anti-inflammatory agents may help mitigate tissue damage following necrotic injury."
            },
            {
                question: "A patient with vitamin A deficiency develops keratinization of conjunctiva. What cellular process is impaired?",
                options: [
                    "Proliferation",
                    "Differentiation", 
                    "Metabolism",
                    "Secretion"
                ],
                correct: 1,
                explanation: "Vitamin A is essential for epithelial differentiation. Deficiency leads to squamous metaplasia with keratinization, seen as Bitot's spots in the conjunctiva.",
                pharmacyTip: "Vitamin A supplementation can reverse these changes if given early."
            },
            {
                question: "Which organelle is most sensitive to hypoxic injury?",
                options: [
                    "Nucleus",
                    "Mitochondria", 
                    "Endoplasmic reticulum",
                    "Golgi apparatus"
                ],
                correct: 1,
                explanation: "Mitochondria are highly sensitive to hypoxia due to their role in oxidative phosphorylation. ATP depletion occurs within minutes of oxygen deprivation.",
                pharmacyTip: "Mitochondrial protection is a target for therapies in ischemic conditions."
            },
            {
                question: "A patient with uncontrolled diabetes develops Kimmelstiel-Wilson lesions in the kidney. What pathological process is involved?",
                options: [
                    "Amyloid deposition",
                    "Hyaline degeneration", 
                    "Fibrinoid necrosis",
                    "Glycogen accumulation"
                ],
                correct: 1,
                explanation: "Kimmelstiel-Wilson lesions in diabetic nephropathy represent hyaline degeneration of glomerular capillaries due to protein leakage and mesangial expansion.",
                pharmacyTip: "Tight glycemic control and ACE inhibitors help prevent progression of diabetic nephropathy."
            },
            {
                question: "Which of the following represents physiological hyperplasia?",
                options: [
                    "Benign prostatic hyperplasia",
                    "Endometrial hyperplasia", 
                    "Compensatory liver hyperplasia", 
                    "Psoriatic skin hyperplasia"
                ],
                correct: 2,
                explanation: "Compensatory hyperplasia of the liver after partial resection is a physiological response to maintain organ function.",
                pharmacyTip: "Understanding regenerative capacity helps in surgical planning and post-operative care."
            },
            {
                question: "A patient with chronic heart failure develops cardiac cachexia. What cellular adaptation is primarily involved?",
                options: [
                    "Hypertrophy",
                    "Hyperplasia", 
                    "Atrophy", 
                    "Metaplasia"
                ],
                correct: 2,
                explanation: "Cardiac cachexia involves atrophy of skeletal muscle due to chronic illness, increased metabolic demands, and cytokine-mediated catabolism.",
                pharmacyTip: "Nutritional support and exercise training can help combat cachexia in heart failure."
            },
            {
                question: "Which type of necrosis is characteristic of brain infarction?",
                options: [
                    "Coagulative necrosis",
                    "Liquefactive necrosis", 
                    "Caseous necrosis",
                    "Fat necrosis"
                ],
                correct: 1,
                explanation: "Brain infarction results in liquefactive necrosis due to high lipid content and release of proteolytic enzymes from microglial cells.",
                pharmacyTip: "Neuroimaging helps distinguish between different types of brain lesions for appropriate management."
            },
            {
                question: "A patient with hemochromatosis develops bronze diabetes. What is accumulating in the pancreas?",
                options: [
                    "Iron", 
                    "Copper",
                    "Calcium",
                    "Fat"
                ],
                correct: 0,
                explanation: "Hemochromatosis involves iron accumulation in various organs, including the pancreas, leading to beta cell damage and diabetes mellitus.",
                pharmacyTip: "Phlebotomy and iron chelation are mainstays of hemochromatosis treatment."
            },
            {
                question: "Which cellular change is characteristic of reversible injury?",
                options: [
                    "Nuclear fragmentation",
                    "Mitochondrial swelling", 
                    "Lysosomal rupture",
                    "Plasma membrane disruption"
                ],
                correct: 1,
                explanation: "Mitochondrial swelling is an early, reversible change in cell injury, while the other options represent irreversible damage.",
                pharmacyTip: "Early intervention can prevent progression from reversible to irreversible injury."
            },
            {
                question: "A patient with gout develops tophi. What substance is accumulating in these lesions?",
                options: [
                    "Calcium pyrophosphate",
                    "Uric acid crystals", 
                    "Cholesterol crystals",
                    "Amyloid protein"
                ],
                correct: 1,
                explanation: "Gouty tophi contain deposits of monosodium urate crystals surrounded by chronic inflammatory reaction.",
                pharmacyTip: "Urate-lowering therapy with allopurinol or febuxostat helps prevent tophus formation."
            },
            {
                question: "Which antioxidant enzyme is deficient in acatalasemia?",
                options: [
                    "Superoxide dismutase",
                    "Catalase", 
                    "Glutathione peroxidase",
                    "Glutathione reductase"
                ],
                correct: 1,
                explanation: "Acatalasemia is a rare genetic disorder with deficient catalase activity, leading to increased susceptibility to hydrogen peroxide toxicity.",
                pharmacyTip: "Avoiding oxidative stressors is important in managing this condition."
            },
            {
                question: "A patient with Alzheimer's disease shows amyloid plaques in the brain. What type of protein accumulation is this?",
                options: [
                    "Misfolded protein accumulation", 
                    "Enzyme deficiency accumulation",
                    "Transport protein accumulation",
                    "Structural protein accumulation"
                ],
                correct: 0,
                explanation: "Amyloid plaques in Alzheimer's disease contain misfolded Œ≤-amyloid protein that aggregates due to improper processing and clearance.",
                pharmacyTip: "Current research focuses on preventing amyloid accumulation as a therapeutic strategy."
            },
            {
                question: "Which cellular adaptation represents an increase in cell number?",
                options: [
                    "Hypertrophy",
                    "Hyperplasia", 
                    "Metaplasia",
                    "Dysplasia"
                ],
                correct: 1,
                explanation: "Hyperplasia involves an increase in the number of cells in a tissue or organ, which can be physiological or pathological.",
                pharmacyTip: "Understanding hyperplastic responses helps in managing conditions like benign prostatic hyperplasia."
            },
            {
                question: "A patient with chronic alcoholism develops Mallory bodies in hepatocytes. What do these represent?",
                options: [
                    "Fat accumulation",
                    "Glycogen accumulation", 
                    "Intermediate filament accumulation", 
                    "Iron accumulation"
                ],
                correct: 2,
                explanation: "Mallory bodies are cytoplasmic inclusions containing aggregated cytokeratin intermediate filaments, characteristic of alcoholic liver disease.",
                pharmacyTip: "Alcohol cessation is crucial as Mallory bodies indicate significant hepatocyte injury."
            },
            {
                question: "Which type of cell death involves autodigestion by lysosomal enzymes?",
                options: [
                    "Apoptosis",
                    "Necrosis", 
                    "Autophagy",
                    "Oncosis"
                ],
                correct: 2,
                explanation: "Autophagy involves degradation of cellular components by lysosomal enzymes, which can be a survival mechanism or lead to cell death.",
                pharmacyTip: "Modulating autophagy is being explored as a therapeutic strategy in various diseases."
            },
            {
                question: "A patient with cystic fibrosis develops pancreatic insufficiency. What cellular process is primarily affected?",
                options: [
                    "Protein synthesis",
                    "Ion transport", 
                    "Lipid metabolism",
                    "Carbohydrate digestion"
                ],
                correct: 1,
                explanation: "Cystic fibrosis involves defective chloride ion transport due to CFTR gene mutation, leading to thick secretions that obstruct pancreatic ducts.",
                pharmacyTip: "Pancreatic enzyme replacement is essential for managing malabsorption in cystic fibrosis."
            },
            {
                question: "Which cellular change is characteristic of apoptosis?",
                options: [
                    "Cell swelling",
                    "Inflammation", 
                    "Chromatin condensation", 
                    "Enzyme release"
                ],
                correct: 2,
                explanation: "Chromatin condensation and fragmentation into well-defined masses is a hallmark of apoptosis, distinguishing it from necrosis.",
                pharmacyTip: "Many cancer treatments work by enhancing apoptotic pathways in malignant cells."
            },
            {
                question: "A patient with chronic venous stasis develops brown induration of legs. What pigment is responsible for the discoloration?",
                options: [
                    "Melanin",
                    "Bilirubin", 
                    "Hemosiderin", 
                    "Lipofuscin"
                ],
                correct: 2,
                explanation: "Brown induration in chronic venous insufficiency results from hemosiderin deposition due to red blood cell extravasation and breakdown.",
                pharmacyTip: "Compression therapy helps prevent progression of venous stasis changes."
            },
            {
                question: "Which organ is most susceptible to carbon tetrachloride toxicity?",
                options: [
                    "Kidney",
                    "Liver", 
                    "Brain",
                    "Heart"
                ],
                correct: 1,
                explanation: "The liver is particularly susceptible to carbon tetrachloride toxicity due to high cytochrome P450 activity that generates toxic metabolites.",
                pharmacyTip: "Early recognition of hepatotoxic drug reactions is crucial for preventing liver failure."
            },
            {
                question: "A patient with rheumatoid arthritis develops vasculitis. What type of necrosis is seen in affected vessels?",
                options: [
                    "Caseous necrosis",
                    "Fibrinoid necrosis", 
                    "Coagulative necrosis",
                    "Liquefactive necrosis"
                ],
                correct: 1,
                explanation: "Fibrinoid necrosis in vasculitis involves deposition of fibrin-like material in vessel walls with immune complex deposition.",
                pharmacyTip: "Immunosuppressive therapy is needed to control the underlying autoimmune process."
            },
            {
                question: "Which cellular adaptation is irreversible?",
                options: [
                    "Hypertrophy",
                    "Hyperplasia", 
                    "Metaplasia",
                    "Dysplasia"
                ],
                correct: 3,
                explanation: "Dysplasia represents disordered growth with cellular atypia and is considered irreversible, often progressing to carcinoma if untreated.",
                pharmacyTip: "Regular screening helps detect dysplastic changes early when intervention is most effective."
            },
            {
                question: "A patient with chronic renal failure develops secondary hyperparathyroidism. What type of calcification may occur?",
                options: [
                    "Dystrophic calcification",
                    "Metastatic calcification", 
                    "Physiological calcification",
                    "Heterotopic calcification"
                ],
                correct: 1,
                explanation: "Secondary hyperparathyroidism in renal failure causes hyperphosphatemia and subsequent metastatic calcification in various tissues.",
                pharmacyTip: "Phosphate binders and vitamin D analogs help manage mineral metabolism in renal failure."
            },
            {
                question: "Which antioxidant is most important for protecting cell membranes from lipid peroxidation?",
                options: [
                    "Vitamin C",
                    "Vitamin E", 
                    "Glutathione",
                    "Superoxide dismutase"
                ],
                correct: 1,
                explanation: "Vitamin E (Œ±-tocopherol) is lipid-soluble and incorporated into cell membranes, where it scavenges lipid peroxyl radicals.",
                pharmacyTip: "Vitamin E supplementation may benefit conditions with increased oxidative stress."
            },
            {
                question: "A patient with tuberculosis develops a Ghon complex. What type of necrosis is present?",
                options: [
                    "Coagulative necrosis",
                    "Liquefactive necrosis", 
                    "Caseous necrosis", 
                    "Fat necrosis"
                ],
                correct: 2,
                explanation: "The Ghon complex in primary tuberculosis contains caseous necrosis within granulomas, characteristic of mycobacterial infections.",
                pharmacyTip: "Understanding TB pathology helps in appropriate anti-tubercular therapy selection and duration."
            },
            {
                question: "Which cellular organelle is primarily responsible for protein synthesis?",
                options: [
                    "Mitochondria",
                    "Rough endoplasmic reticulum", 
                    "Golgi apparatus",
                    "Lysosomes"
                ],
                correct: 1,
                explanation: "The rough endoplasmic reticulum, with its attached ribosomes, is the primary site of protein synthesis in the cell.",
                pharmacyTip: "Many drugs can affect protein synthesis, which is important for their therapeutic and toxic effects."
            },
            {
                question: "A patient with chronic bronchitis develops increased mucus production. What cellular adaptation is involved?",
                options: [
                    "Hypertrophy of mucous glands", 
                    "Hyperplasia of goblet cells",
                    "Metaplasia of ciliated cells",
                    "Dysplasia of basal cells"
                ],
                correct: 1,
                explanation: "Chronic bronchitis involves hyperplasia of mucus-secreting goblet cells in the bronchial epithelium, leading to increased mucus production.",
                pharmacyTip: "Mucolytics and bronchodilators help manage symptoms in chronic bronchitis."
            },
            {
                question: "Which type of gangrene is caused by Clostridium perfringens?",
                options: [
                    "Dry gangrene",
                    "Wet gangrene", 
                    "Gas gangrene", 
                    "Hospital gangrene"
                ],
                correct: 2,
                explanation: "Gas gangrene is caused by Clostridium perfringens, which produces gas bubbles in tissues through fermentation of muscle glycogen.",
                pharmacyTip: "Prompt surgical debridement and appropriate antibiotics are essential for gas gangrene management."
            },
            {
                question: "A patient with vitamin D deficiency develops osteomalacia. What cellular process is impaired?",
                options: [
                    "Bone formation",
                    "Bone mineralization", 
                    "Bone resorption",
                    "Cartilage formation"
                ],
                correct: 1,
                explanation: "Osteomalacia involves impaired bone mineralization due to vitamin D deficiency, leading to accumulation of unmineralized osteoid.",
                pharmacyTip: "Vitamin D and calcium supplementation are essential for treating osteomalacia."
            },
            {
                question: "Which cellular change is characteristic of hydropic degeneration?",
                options: [
                    "Nuclear pyknosis",
                    "Cytoplasmic vacuolization", 
                    "Membrane blebbing",
                    "Chromatin margination"
                ],
                correct: 1,
                explanation: "Hydropic degeneration shows cytoplasmic vacuolization due to accumulation of water, representing early reversible cell injury.",
                pharmacyTip: "Recognizing reversible changes allows for early intervention to prevent permanent damage."
            },
            {
                question: "A patient with chronic aspirin use develops tinnitus. What cellular mechanism is involved?",
                options: [
                    "Mitochondrial dysfunction",
                    "Ion channel blockade", 
                    "Neurotransmitter alteration",
                    "Cochlear hair cell damage"
                ],
                correct: 3,
                explanation: "Salicylate toxicity can damage cochlear hair cells through multiple mechanisms, including oxidative stress and altered blood flow.",
                pharmacyTip: "Monitoring for ototoxicity is important with high-dose or chronic salicylate therapy."
            },
            {
                question: "Which type of necrosis involves dissolution of tissue by hydrolytic enzymes?",
                options: [
                    "Coagulative necrosis",
                    "Liquefactive necrosis", 
                    "Caseous necrosis",
                    "Fat necrosis"
                ],
                correct: 1,
                explanation: "Liquefactive necrosis involves tissue dissolution by hydrolytic enzymes released from neutrophils or intrinsic tissue enzymes.",
                pharmacyTip: "Understanding necrosis patterns helps in diagnosing the underlying cause and extent of tissue damage."
            }
        ];

        // Quiz state variables
        let currentQuestion = 0;
        let score = 0;
        let userAnswers = new Array(questions.length).fill(null);
        let timer;
        let timeLeft = 45 * 60; // 45 minutes in seconds
        let quizCompleted = false;
        let startTime;
        let correctAnswers = 0;
        let incorrectAnswers = 0;

        // DOM elements
        const questionNumberEl = document.getElementById('question-number');
        const questionTextEl = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const feedbackArea = document.getElementById('feedback-area');
        const feedbackTitle = document.getElementById('feedback-title');
        const explanationEl = document.getElementById('explanation');
        const pharmacyTipEl = document.getElementById('pharmacy-tip');
        const nextBtn = document.getElementById('next-btn');
        const prevBtn = document.getElementById('prev-btn');
        const submitBtn = document.getElementById('submit-btn');
        const scoreValue = document.getElementById('score-value');
        const progressValue = document.getElementById('progress-value');
        const correctValue = document.getElementById('correct-value');
        const incorrectValue = document.getElementById('incorrect-value');
        const progressBar = document.getElementById('progress-bar');
        const progressPercent = document.getElementById('progress-percent');
        const answeredValue = document.getElementById('answered-value');
        const remainingValue = document.getElementById('remaining-value');
        const timerEl = document.getElementById('timer');
        const questionPalette = document.getElementById('question-palette');
        const resultsContainer = document.getElementById('results-container');
        const finalScore = document.getElementById('final-score');
        const performanceMessage = document.getElementById('performance-message');
        const finalCorrect = document.getElementById('final-correct');
        const finalIncorrect = document.getElementById('final-incorrect');
        const finalSkipped = document.getElementById('final-skipped');
        const finalTime = document.getElementById('final-time');
        const questionReview = document.getElementById('question-review');
        const retakeBtn = document.getElementById('retake-btn');

        // Initialize quiz
        function initQuiz() {
            scoreValue.textContent = score;
            correctValue.textContent = correctAnswers;
            incorrectValue.textContent = incorrectAnswers;
            startTime = new Date();
            createQuestionPalette();
            loadQuestion(currentQuestion);
            startTimer();
            updateProgress();
        }

        // Create question palette
        function createQuestionPalette() {
            questionPalette.innerHTML = '';
            for (let i = 0; i < questions.length; i++) {
                const paletteItem = document.createElement('div');
                paletteItem.className = 'palette-item';
                if (i === currentQuestion) {
                    paletteItem.classList.add('current');
                }
                if (userAnswers[i] !== null) {
                    paletteItem.classList.add('answered');
                }
                paletteItem.textContent = i + 1;
                paletteItem.addEventListener('click', () => navigateToQuestion(i));
                questionPalette.appendChild(paletteItem);
            }
        }

        // Navigate to specific question
        function navigateToQuestion(index) {
            currentQuestion = index;
            loadQuestion(currentQuestion);
            createQuestionPalette();
        }

        // Load question
        function loadQuestion(index) {
            const question = questions[index];
            questionNumberEl.textContent = `Question ${index + 1} of ${questions.length}`;
            questionTextEl.textContent = question.question;
            
            optionsContainer.innerHTML = '';
            question.options.forEach((option, i) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                if (userAnswers[index] === i) {
                    optionElement.classList.add('selected');
                }
                
                const optionLetter = document.createElement('div');
                optionLetter.className = 'option-letter';
                optionLetter.textContent = String.fromCharCode(65 + i);
                
                const optionText = document.createElement('div');
                optionText.className = 'option-text';
                optionText.textContent = option;
                
                optionElement.appendChild(optionLetter);
                optionElement.appendChild(optionText);
                optionElement.dataset.index = i;
                optionElement.addEventListener('click', () => selectOption(i));
                optionsContainer.appendChild(optionElement);
            });
            
            feedbackArea.classList.remove('show');
            updateProgress();
            updatePalette();
            
            // Update button states
            prevBtn.disabled = index === 0;
            nextBtn.style.display = index === questions.length - 1 ? 'none' : 'block';
            submitBtn.style.display = index === questions.length - 1 ? 'block' : 'none';
        }

        // Select option
        function selectOption(optionIndex) {
            if (quizCompleted) return;
            
            const options = document.querySelectorAll('.option');
            options.forEach(opt => opt.classList.remove('selected', 'correct', 'incorrect'));
            
            options[optionIndex].classList.add('selected');
            userAnswers[currentQuestion] = optionIndex;
            
            const isCorrect = optionIndex === questions[currentQuestion].correct;
            
            if (isCorrect) {
                options[optionIndex].classList.add('correct');
                if (userAnswers[currentQuestion] === null) {
                    score++;
                    correctAnswers++;
                    scoreValue.textContent = score;
                    correctValue.textContent = correctAnswers;
                }
            } else {
                options[optionIndex].classList.add('incorrect');
                options[questions[currentQuestion].correct].classList.add('correct');
                if (userAnswers[currentQuestion] === null) {
                    incorrectAnswers++;
                    incorrectValue.textContent = incorrectAnswers;
                }
            }
            
            // Show feedback
            feedbackTitle.textContent = isCorrect ? 'Correct!' : 'Incorrect!';
            feedbackTitle.className = `feedback-title ${isCorrect ? 'correct' : 'incorrect'}`;
            explanationEl.textContent = questions[currentQuestion].explanation;
            pharmacyTipEl.textContent = questions[currentQuestion].pharmacyTip;
            feedbackArea.classList.add('show');
            
            updatePalette();
            updateProgress();
        }

        // Update question palette
        function updatePalette() {
            const paletteItems = document.querySelectorAll('.palette-item');
            paletteItems.forEach((item, i) => {
                item.classList.remove('current', 'answered', 'correct', 'incorrect');
                
                if (i === currentQuestion) {
                    item.classList.add('current');
                }
                
                if (userAnswers[i] !== null) {
                    item.classList.add('answered');
                    if (userAnswers[i] === questions[i].correct) {
                        item.classList.add('correct');
                    } else {
                        item.classList.add('incorrect');
                    }
                }
            });
        }

        // Update progress
        function updateProgress() {
            const answered = userAnswers.filter(answer => answer !== null).length;
            const progress = (answered / questions.length) * 100;
            
            progressBar.style.width = `${progress}%`;
            progressPercent.textContent = `${Math.round(progress)}%`;
            progressValue.textContent = `${Math.round(progress)}%`;
            answeredValue.textContent = answered;
            remainingValue.textContent = questions.length - answered;
        }

        // Next question
        nextBtn.addEventListener('click', () => {
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                loadQuestion(currentQuestion);
            }
        });

        // Previous question
        prevBtn.addEventListener('click', () => {
            if (currentQuestion > 0) {
                currentQuestion--;
                loadQuestion(currentQuestion);
            }
        });

        // Submit quiz
        submitBtn.addEventListener('click', showResults);

        // Timer function
        function startTimer() {
            updateTimerDisplay();
            timer = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    if (!quizCompleted) {
                        showResults();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            timerEl.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            // Change color when time is running low
            if (timeLeft < 300) { // 5 minutes
                timerEl.classList.add('timer-warning');
            }
        }

        // Show results
        function showResults() {
            quizCompleted = true;
            clearInterval(timer);
            
            // Calculate final score
            score = 0;
            correctAnswers = 0;
            incorrectAnswers = 0;
            
            for (let i = 0; i < questions.length; i++) {
                if (userAnswers[i] === questions[i].correct) {
                    score++;
                    correctAnswers++;
                } else if (userAnswers[i] !== null) {
                    incorrectAnswers++;
                }
            }
            
            // Calculate time taken
            const endTime = new Date();
            const timeTaken = Math.floor((endTime - startTime) / 1000);
            const minutesTaken = Math.floor(timeTaken / 60);
            const secondsTaken = timeTaken % 60;
            
            // Update results display
            finalScore.textContent = `${score}/${questions.length}`;
            finalCorrect.textContent = correctAnswers;
            finalIncorrect.textContent = incorrectAnswers;
            finalSkipped.textContent = questions.length - (correctAnswers + incorrectAnswers);
            finalTime.textContent = `${minutesTaken}:${secondsTaken.toString().padStart(2, '0')}`;
            
            // Performance feedback
            const percentage = (score / questions.length) * 100;
            if (percentage >= 80) {
                performanceMessage.textContent = "Excellent! You have a strong understanding of cellular pathology concepts essential for pharmacy practice.";
            } else if (percentage >= 70) {
                performanceMessage.textContent = "Good work! You have a solid foundation in cellular injury and adaptation principles.";
            } else if (percentage >= 60) {
                performanceMessage.textContent = "Satisfactory performance. Review the concepts you missed to strengthen your understanding.";
            } else if (percentage >= 50) {
                performanceMessage.textContent = "You have basic understanding but need more study on cellular pathology concepts.";
            } else {
                performanceMessage.textContent = "Focus on reviewing core concepts of cellular injury, adaptation, and their clinical implications.";
            }
            
            // Generate question review
            questionReview.innerHTML = '';
            questions.forEach((question, index) => {
                const reviewItem = document.createElement('div');
                reviewItem.className = 'review-item';
                
                const isCorrect = userAnswers[index] === question.correct;
                const userAnswerText = userAnswers[index] !== null ? 
                    `${String.fromCharCode(65 + userAnswers[index])}. ${question.options[userAnswers[index]]}` : 
                    'Not answered';
                
                const correctAnswerText = `${String.fromCharCode(65 + question.correct)}. ${question.options[question.correct]}`;
                
                let reviewHTML = `
                    <div class="review-question">${index + 1}. ${question.question}</div>
                    <div class="review-answer ${isCorrect ? 'review-correct' : 'review-incorrect'}">
                        <strong>Your answer:</strong> ${userAnswerText}
                    </div>
                    <div class="review-answer review-correct">
                        <strong>Correct answer:</strong> ${correctAnswerText}
                    </div>
                    <div class="review-explanation">
                        <strong>Explanation:</strong> ${question.explanation}
                    </div>
                    <div class="pharmacy-context">
                        <strong>Pharmacy Context:</strong> ${question.pharmacyTip}
                    </div>
                `;
                
                reviewItem.innerHTML = reviewHTML;
                questionReview.appendChild(reviewItem);
            });
            
            // Show results, hide quiz
            document.querySelector('.main-content').style.display = 'none';
            resultsContainer.classList.add('show');
        }

        // Retake quiz
        retakeBtn.addEventListener('click', () => {
            // Reset quiz state
            currentQuestion = 0;
            score = 0;
            userAnswers = new Array(questions.length).fill(null);
            timeLeft = 45 * 60;
            quizCompleted = false;
            correctAnswers = 0;
            incorrectAnswers = 0;
            
            // Reset UI
            scoreValue.textContent = score;
            correctValue.textContent = correctAnswers;
            incorrectValue.textContent = incorrectAnswers;
            timerEl.textContent = '45:00';
            timerEl.classList.remove('timer-warning');
            document.querySelector('.main-content').style.display = 'grid';
            resultsContainer.classList.remove('show');
            
            // Restart quiz
            initQuiz();
        });

        // Initialize the quiz when page loads
        document.addEventListener('DOMContentLoaded', initQuiz);
    </script>
</body>
    </html>
